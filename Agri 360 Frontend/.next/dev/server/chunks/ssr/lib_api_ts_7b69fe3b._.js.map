{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/m_a/v0-agre-360-frontend-main/v0-agre-360-frontend-main/lib/api.ts"],"sourcesContent":["const API_BASE = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000/api\"\r\n\r\n// Mock authentication - stores users in localStorage\r\nconst mockUsers = (() => {\r\n  if (typeof window !== \"undefined\") {\r\n    const stored = localStorage.getItem(\"mock_users\")\r\n    return stored ? JSON.parse(stored) : {}\r\n  }\r\n  return {}\r\n})()\r\n\r\nconst saveMockUsers = () => {\r\n  if (typeof window !== \"undefined\") {\r\n    localStorage.setItem(\"mock_users\", JSON.stringify(mockUsers))\r\n  }\r\n}\r\n\r\nasync function request(path: string, options: RequestInit = {}) {\r\n  const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null\r\n  const headers: Record<string, string> = {\r\n    \"Content-Type\": \"application/json\",\r\n    ...(options.headers as Record<string, string>),\r\n  }\r\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`\r\n\r\n  const res = await fetch(`${API_BASE}${path}`, {\r\n    credentials: \"include\",\r\n    ...options,\r\n    headers,\r\n  })\r\n\r\n  if (!res.ok) {\r\n    const text = await res.text()\r\n    throw new Error(text || res.statusText)\r\n  }\r\n\r\n  const contentType = res.headers.get(\"content-type\") || \"\"\r\n  if (contentType.includes(\"application/json\")) return res.json()\r\n  return res.text()\r\n}\r\n\r\nexport const auth = {\r\n  register: (data: any) => {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        try {\r\n          if (!data.email || !data.password) {\r\n            reject(new Error(\"Email and password required\"))\r\n            return\r\n          }\r\n          if (mockUsers[data.email]) {\r\n            reject(new Error(\"User already exists\"))\r\n            return\r\n          }\r\n          mockUsers[data.email] = { email: data.email, password: data.password, name: data.name || \"User\" }\r\n          saveMockUsers()\r\n          const token = \"mock_token_\" + Date.now()\r\n          localStorage.setItem(\"token\", token)\r\n          localStorage.setItem(\"user_email\", data.email)\r\n          resolve({ token, user: { email: data.email, name: data.name || \"User\" } })\r\n        } catch (err) {\r\n          reject(err)\r\n        }\r\n      }, 500)\r\n    })\r\n  },\r\n  login: (data: any) => {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        try {\r\n          if (!data.email || !data.password) {\r\n            reject(new Error(\"Email and password required\"))\r\n            return\r\n          }\r\n          const user = mockUsers[data.email]\r\n          if (!user || user.password !== data.password) {\r\n            reject(new Error(\"Invalid email or password\"))\r\n            return\r\n          }\r\n          const token = \"mock_token_\" + Date.now()\r\n          localStorage.setItem(\"token\", token)\r\n          localStorage.setItem(\"user_email\", data.email)\r\n          resolve({ token, user: { email: user.email, name: user.name } })\r\n        } catch (err) {\r\n          reject(err)\r\n        }\r\n      }, 500)\r\n    })\r\n  },\r\n  me: () => {\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        const email = typeof window !== \"undefined\" ? localStorage.getItem(\"user_email\") : null\r\n        if (email && mockUsers[email]) {\r\n          resolve({ email, name: mockUsers[email].name })\r\n        } else {\r\n          resolve(null)\r\n        }\r\n      }, 100)\r\n    })\r\n  },\r\n}\r\n\r\nexport const user = {\r\n  getProfile: () => {\r\n    return new Promise((resolve) => {\r\n      const email = typeof window !== \"undefined\" ? localStorage.getItem(\"user_email\") : null\r\n      resolve({ email, name: mockUsers[email!]?.name || \"User\", avatar: \"/placeholder-user.jpg\" })\r\n    })\r\n  },\r\n  updateProfile: (data: any) => Promise.resolve({ success: true }),\r\n}\r\n\r\nexport const marketplace = {\r\n  listListings: () => Promise.resolve([\r\n    { id: 1, name: \"Corn Seeds\", price: 50, quantity: 100 },\r\n    { id: 2, name: \"Wheat Seeds\", price: 45, quantity: 80 },\r\n  ]),\r\n  createListing: (data: any) => Promise.resolve({ id: Date.now(), ...data }),\r\n  createOrder: (data: any) => Promise.resolve({ id: Date.now(), status: \"pending\" }),\r\n}\r\n\r\nexport const farms = {\r\n  createFarm: (data: any) => Promise.resolve({ id: Date.now(), ...data }),\r\n  getFarm: (id: string) => Promise.resolve({ id, name: \"Farm 1\", area: 100 }),\r\n  analyzeSoil: (data: any) => Promise.resolve({ quality: \"Good\", pH: 6.8 }),\r\n}\r\n\r\nexport const harvest = {\r\n  createHarvestPlan: (data: any) => Promise.resolve({ id: Date.now(), ...data }),\r\n  listHarvestPlans: () => Promise.resolve([\r\n    { id: 1, crop: \"Corn\", date: \"2025-09-15\", yield: 1000 },\r\n  ]),\r\n}\r\n\r\nexport const dashboard = {\r\n  getStats: () => Promise.resolve({\r\n    totalYield: 5000,\r\n    waterUsed: 12000,\r\n    cropHealth: 95,\r\n    revenue: 50000,\r\n  }),\r\n  computeAndStore: (data: any) => Promise.resolve({ computed: true }),\r\n}\r\n\r\nexport const chat = {\r\n  chat: (data: any) => Promise.resolve({ response: \"This is a mock AI response to: \" + data.message }),\r\n}\r\n\r\nexport const plans = {\r\n  create: (data: any) => Promise.resolve({ id: Date.now(), ...data }),\r\n  list: () => Promise.resolve([]),\r\n  get: (id: string) => Promise.resolve({ id, title: \"Plan 1\" }),\r\n  update: (id: string, data: any) => Promise.resolve({ id, ...data }),\r\n  remove: (id: string) => Promise.resolve({ success: true }),\r\n}\r\n\r\nexport default {\r\n  auth,\r\n  user,\r\n  marketplace,\r\n  farms,\r\n  harvest,\r\n  dashboard,\r\n  chat,\r\n  plans,\r\n}\r\n"],"names":[],"mappings":"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"}}]
}